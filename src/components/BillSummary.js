import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { Trash2, Plus, Minus } from 'lucide-react';
import { useState } from 'react';
export default function BillSummary({ bill, onRemoveItem, onUpdateQuantity, onDiscountChange, onTaxRateChange, onPaymentModeChange, onPrint, onSave, }) {
    const [discountInput, setDiscountInput] = useState(bill.discount);
    const [discountType, setDiscountType] = useState(bill.discountType);
    const [taxRate, setTaxRate] = useState(bill.taxRate);
    const handleDiscountChange = () => {
        onDiscountChange?.(discountInput, discountType);
    };
    const handleTaxRateChange = () => {
        onTaxRateChange?.(taxRate);
    };
    const paymentModes = ['cash', 'upi', 'card'];
    return (_jsxs("div", { className: "bg-white rounded-lg border border-slate-200 p-4 lg:p-6 space-y-4", children: [_jsx("h3", { className: "font-bold text-lg text-slate-900", children: "Bill Summary" }), bill.items.length > 0 ? (_jsx("div", { className: "space-y-2 max-h-64 overflow-y-auto", children: bill.items.map((item) => (_jsxs("div", { className: "flex items-center justify-between p-2 bg-slate-50 rounded", children: [_jsxs("div", { className: "flex-1 min-w-0", children: [_jsxs("p", { className: "text-sm font-medium text-slate-900 truncate", children: [item.itemName, " (", item.size, ")"] }), _jsxs("p", { className: "text-xs text-slate-500", children: ["\u20B9", item.price, " \u00D7 ", item.quantity] })] }), _jsxs("div", { className: "flex items-center gap-2 ml-2", children: [_jsxs("span", { className: "font-semibold text-slate-900 w-16 text-right", children: ["\u20B9", item.subtotal] }), _jsxs("div", { className: "flex items-center gap-1", children: [_jsx("button", { onClick: () => onUpdateQuantity?.(item.variantId, item.quantity - 1), disabled: item.quantity <= 1, className: "p-1 hover:bg-slate-200 rounded disabled:opacity-50", children: _jsx(Minus, { size: 14 }) }), _jsx("span", { className: "w-6 text-center text-xs font-semibold", children: item.quantity }), _jsx("button", { onClick: () => onUpdateQuantity?.(item.variantId, item.quantity + 1), className: "p-1 hover:bg-slate-200 rounded", children: _jsx(Plus, { size: 14 }) })] }), onRemoveItem && (_jsx("button", { onClick: () => onRemoveItem(item.variantId), className: "p-1 hover:bg-red-50 rounded ml-1", children: _jsx(Trash2, { size: 14, className: "text-red-600" }) }))] })] }, item.variantId))) })) : (_jsx("div", { className: "text-center py-8 text-slate-500", children: _jsx("p", { className: "text-sm", children: "No items added yet" }) })), _jsxs("div", { className: "border-t border-slate-200 pt-4 space-y-2", children: [_jsxs("div", { className: "flex justify-between text-sm", children: [_jsx("span", { className: "text-slate-600", children: "Subtotal" }), _jsxs("span", { className: "font-semibold", children: ["\u20B9", bill.subtotal] })] }), _jsxs("div", { className: "flex gap-2 items-center", children: [_jsxs("div", { className: "flex-1", children: [_jsx("label", { className: "text-xs text-slate-600 block mb-1", children: "Discount" }), _jsxs("div", { className: "flex gap-2", children: [_jsx("input", { type: "number", value: discountInput, onChange: (e) => setDiscountInput(Number(e.target.value)), className: "flex-1 px-2 py-1 border border-slate-300 rounded text-sm", placeholder: "0" }), _jsxs("select", { value: discountType, onChange: (e) => setDiscountType(e.target.value), className: "px-2 py-1 border border-slate-300 rounded text-sm", children: [_jsx("option", { value: "fixed", children: "\u20B9" }), _jsx("option", { value: "percentage", children: "%" })] }), _jsx("button", { onClick: handleDiscountChange, className: "px-3 py-1 bg-slate-200 hover:bg-slate-300 rounded text-sm font-medium transition-colors", children: "Apply" })] })] }), _jsxs("div", { className: "text-right", children: [_jsx("p", { className: "text-xs text-slate-600", children: "Discount" }), _jsxs("p", { className: "font-semibold text-red-600", children: ["-\u20B9", Math.round(bill.discount)] })] })] }), _jsxs("div", { className: "flex gap-2 items-center", children: [_jsxs("div", { className: "flex-1", children: [_jsx("label", { className: "text-xs text-slate-600 block mb-1", children: "Tax Rate" }), _jsxs("div", { className: "flex gap-2", children: [_jsx("input", { type: "number", value: taxRate, onChange: (e) => setTaxRate(Number(e.target.value)), className: "flex-1 px-2 py-1 border border-slate-300 rounded text-sm", placeholder: "18" }), _jsx("span", { className: "px-2 py-1 text-sm text-slate-600", children: "%" }), _jsx("button", { onClick: handleTaxRateChange, className: "px-3 py-1 bg-slate-200 hover:bg-slate-300 rounded text-sm font-medium transition-colors", children: "Apply" })] })] }), _jsxs("div", { className: "text-right", children: [_jsx("p", { className: "text-xs text-slate-600", children: "Tax" }), _jsxs("p", { className: "font-semibold text-slate-900", children: ["\u20B9", bill.tax] })] })] }), _jsxs("div", { className: "bg-indigo-50 p-3 rounded-lg flex justify-between items-center", children: [_jsx("span", { className: "font-bold text-slate-900", children: "Total Amount" }), _jsxs("span", { className: "text-2xl font-bold text-indigo-600", children: ["\u20B9", bill.total] })] })] }), _jsxs("div", { className: "space-y-2", children: [_jsx("label", { className: "text-sm font-medium text-slate-900", children: "Payment Mode" }), _jsx("div", { className: "flex gap-2", children: paymentModes.map((mode) => (_jsx("button", { onClick: () => onPaymentModeChange?.(mode), className: `flex-1 py-2 px-3 rounded font-medium text-sm transition-colors ${bill.paymentMode === mode
                                ? 'bg-indigo-600 text-white'
                                : 'bg-slate-100 text-slate-900 hover:bg-slate-200'}`, children: mode.toUpperCase() }, mode))) })] }), _jsxs("div", { className: "flex gap-2 pt-4 border-t border-slate-200", children: [onPrint && (_jsx("button", { onClick: onPrint, className: "flex-1 py-2 px-4 bg-slate-200 hover:bg-slate-300 text-slate-900 rounded font-medium transition-colors", children: "Print" })), onSave && (_jsx("button", { onClick: () => onSave(bill.paymentMode), disabled: bill.items.length === 0, className: "flex-1 py-2 px-4 bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white rounded font-medium transition-colors", children: "Save Bill" }))] })] }));
}
