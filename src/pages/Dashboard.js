import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import Layout from '@/components/Layout';
import { useApp } from '@/contexts/AppContext';
import { Link } from 'wouter';
import { TrendingUp, ShoppingCart, Package, DollarSign } from 'lucide-react';
import { useMemo } from 'react';
export default function Dashboard() {
    const { bills, items } = useApp();
    const stats = useMemo(() => {
        const today = new Date().toDateString();
        const todaysBills = bills.filter((b) => new Date(b.date).toDateString() === today);
        const todaysSales = todaysBills.reduce((sum, b) => sum + b.total, 0);
        return {
            totalBills: bills.length,
            todaysSales,
            totalItems: items.length,
            totalRevenue: bills.reduce((sum, b) => sum + b.total, 0),
        };
    }, [bills, items]);
    const StatCard = ({ icon: Icon, label, value, color }) => (_jsx("div", { className: `bg-white rounded-lg border border-slate-200 p-6 hover:shadow-md transition-shadow`, children: _jsxs("div", { className: "flex items-start justify-between", children: [_jsxs("div", { children: [_jsx("p", { className: "text-sm text-slate-600 mb-1", children: label }), _jsx("p", { className: "text-2xl md:text-3xl font-bold text-slate-900", children: value })] }), _jsx("div", { className: `p-3 rounded-lg ${color}`, children: _jsx(Icon, { size: 24, className: "text-white" }) })] }) }));
    return (_jsxs(Layout, { title: "Dashboard", children: [_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8", children: [_jsx(StatCard, { icon: ShoppingCart, label: "Total Bills", value: stats.totalBills, color: "bg-blue-600" }), _jsx(StatCard, { icon: TrendingUp, label: "Today's Sales", value: `₹${stats.todaysSales}`, color: "bg-green-600" }), _jsx(StatCard, { icon: Package, label: "Total Items", value: stats.totalItems, color: "bg-purple-600" }), _jsx(StatCard, { icon: DollarSign, label: "Total Revenue", value: `₹${stats.totalRevenue}`, color: "bg-orange-600" })] }), _jsxs("div", { className: "bg-white rounded-lg border border-slate-200 p-6", children: [_jsx("h2", { className: "text-xl font-bold text-slate-900 mb-4", children: "Quick Actions" }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [_jsxs(Link, { href: "/make-bill", className: "p-4 bg-indigo-50 hover:bg-indigo-100 border border-indigo-200 rounded-lg transition-colors text-center", children: [_jsx("p", { className: "font-semibold text-indigo-900", children: "Make Bill" }), _jsx("p", { className: "text-sm text-indigo-700", children: "Create new bill" })] }), _jsxs(Link, { href: "/view-bills", className: "p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg transition-colors text-center", children: [_jsx("p", { className: "font-semibold text-blue-900", children: "View Bills" }), _jsx("p", { className: "text-sm text-blue-700", children: "See all bills" })] }), _jsxs(Link, { href: "/items", className: "p-4 bg-green-50 hover:bg-green-100 border border-green-200 rounded-lg transition-colors text-center", children: [_jsx("p", { className: "font-semibold text-green-900", children: "Item Management" }), _jsx("p", { className: "text-sm text-green-700", children: "Manage items" })] })] })] }), bills.length > 0 && (_jsxs("div", { className: "mt-8 bg-white rounded-lg border border-slate-200 p-6", children: [_jsx("h2", { className: "text-xl font-bold text-slate-900 mb-4", children: "Recent Bills" }), _jsx("div", { className: "overflow-x-auto", children: _jsxs("table", { className: "w-full text-sm", children: [_jsx("thead", { children: _jsxs("tr", { className: "border-b border-slate-200", children: [_jsx("th", { className: "text-left py-3 px-4 font-semibold text-slate-900", children: "Bill ID" }), _jsx("th", { className: "text-left py-3 px-4 font-semibold text-slate-900", children: "Date" }), _jsx("th", { className: "text-left py-3 px-4 font-semibold text-slate-900", children: "Customer" }), _jsx("th", { className: "text-right py-3 px-4 font-semibold text-slate-900", children: "Amount" }), _jsx("th", { className: "text-left py-3 px-4 font-semibold text-slate-900", children: "Payment" })] }) }), _jsx("tbody", { children: bills.slice(0, 5).map((bill) => (_jsxs("tr", { className: "border-b border-slate-100 hover:bg-slate-50", children: [_jsx("td", { className: "py-3 px-4 font-medium text-slate-900", children: bill.id }), _jsx("td", { className: "py-3 px-4 text-slate-600", children: new Date(bill.date).toLocaleDateString() }), _jsx("td", { className: "py-3 px-4 text-slate-600", children: bill.customerName }), _jsxs("td", { className: "py-3 px-4 text-right font-semibold text-slate-900", children: ["\u20B9", bill.total] }), _jsx("td", { className: "py-3 px-4", children: _jsx("span", { className: `px-3 py-1 rounded-full text-xs font-semibold ${bill.paymentMode === 'cash'
                                                        ? 'bg-green-100 text-green-800'
                                                        : bill.paymentMode === 'upi'
                                                            ? 'bg-blue-100 text-blue-800'
                                                            : 'bg-purple-100 text-purple-800'}`, children: bill.paymentMode.toUpperCase() }) })] }, bill.id))) })] }) })] }))] }));
}
